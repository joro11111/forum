{{define "base"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{if .Title}}{{.Title}} - {{end}}Literary Lions Forum</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script>
        // Save night mode preference in localStorage
        function toggleNightMode() {
            const body = document.body;
            body.classList.toggle('night-mode');
            const isNightMode = body.classList.contains('night-mode');
            localStorage.setItem('nightMode', isNightMode ? 'enabled' : 'disabled');
        }

        // Apply night mode based on saved preference
        document.addEventListener('DOMContentLoaded', () => {
            const nightMode = localStorage.getItem('nightMode');
            if (nightMode === 'enabled') {
                document.body.classList.add('night-mode');
            }
        });
    </script>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">Literary Lions</a>
                <nav class="nav">
                    {{if .CurrentUser}}
                        <a href="/profile/{{.CurrentUser.Username}}">ğŸ‘¤ Profile</a>
                        {{if .CurrentUser.IsAdmin}}
                            <a href="/admin">ğŸ›¡ï¸ Admin Panel</a>
                        {{end}}
                        <span>Welcome, {{.CurrentUser.Username}}!</span>
                        <a href="/create-post">âœï¸ Create Post</a>
                        <a href="/logout" class="btn-primary">Logout</a>
                    {{else}}
                        <a href="/login">Login</a>
                        <a href="/register" class="btn-primary">Register</a>
                    {{end}}
                    <span class="nav-spacer"></span>
                    <form class="nav-search" method="GET" action="/search">
                        <input type="text" name="q" placeholder="Search..." aria-label="Search">
                        <button type="submit">ğŸ”</button>
                    </form>
                    <button onclick="toggleNightMode()" class="btn-night-mode">ğŸŒ™ Toggle Night Mode</button>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            {{template "content" .}}
        </div>
    </main>

</body>
{{end}}</html>
